(this["webpackJsonpdo-front"]=this["webpackJsonpdo-front"]||[]).push([[0],{165:function(t,e,n){t.exports=n(335)},170:function(t,e,n){},183:function(t,e){},283:function(t,e,n){},335:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),o=n(20),i=n.n(o),l=(n(170),n(86)),u=n.n(l),s=(n(171),n(172),n(162)),c=n(35);n(281),n(282),n(283);function f(t){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function p(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function m(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=b(t);if(e){var r=b(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v(this,n)}}function v(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?g(t):e}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(t){m(n,t);var e=D(n);function n(){var t;return d(this,n),w(g(t=e.call(this)),"handleChange",(function(e,n){console.log(e,n),"startDate"===e&&(t.setState({startDate:n}),S("startDate",n)),"endDate"===e&&(t.setState({endDate:n}),S("endDate",n))})),S=S.bind(g(t)),t.state={startDate:null,endDate:null},t}return p(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"dateFilter"},r.a.createElement("div",{style:{alignSelf:"center"}},"Filtering by date:"),r.a.createElement(s.DateRangePicker,{style:{fontSize:"small"},startDatePlaceholderText:"start point",endDatePlaceholderText:"end point",isOutsideRange:function(){return!1},startDate:this.state.startDate,startDateId:"your_unique_start_date_id",endDate:this.state.endDate,endDateId:"your_unique_end_date_id",onDatesChange:function(e){var n=e.startDate,a=e.endDate;t.handleChange("startDate",n,a),t.handleChange("endDate",a)},focusedInput:this.state.focusedInput,onFocusChange:function(e){return t.setState({focusedInput:e})}}))}}]),n}(r.a.Component);function S(t,e){"filterText"===t&&this.setState({filterText:e}),"startDate"===t&&this.setState({startDate:e}),"endDate"===t&&this.setState({endDate:e})}var k=function(t){m(n,t);var e=D(n);function n(t){var a;return d(this,n),(a=e.call(this,t)).state={filterText:""},a}return p(n,[{key:"handleChange",value:function(t){this.setState({filterText:t.target.value}),S("filterText",t.target.value)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,"Filter by contents of email and city:",r.a.createElement("input",{type:"text",value:this.state.filterText,onChange:function(e){return t.handleChange(e)}}))}}]),n}(r.a.Component),_=function(t){m(n,t);var e=D(n);function n(){var t;d(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return w(g(t=e.call.apply(e,[this].concat(r))),"downloadDump",(function(){setTimeout((function(){var e=t.state.startDate,n=t.state.endDate,a={file:"/download?from="+("0"+e.getDate()).slice(-2)+("0"+(e.getMonth()+1)).slice(-2)+e.getFullYear()+"&to="+("0"+n.getDate()).slice(-2)+("0"+(n.getMonth()+1)).slice(-2)+n.getFullYear()};window.open(a.file)}),100)})),w(g(t),"state",{startDate:new Date,endDate:new Date}),w(g(t),"handleChange",(function(e,n){"startDate"===e&&t.setState({startDate:n}),"endDate"===e&&t.setState({endDate:n})})),t}return p(n,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,"Get archive entries by date",r.a.createElement("br",null),"From:",r.a.createElement(u.a,{dateFormat:"dd/MM/yyyy",selected:this.state.startDate,onChange:function(e){return t.handleChange("startDate",e)},showYearDropdown:!0,showMonthDropdown:!0}),r.a.createElement("br",null),"To:",r.a.createElement(u.a,{dateFormat:"dd/MM/yyyy",selected:this.state.endDate,onChange:function(e){return t.handleChange("endDate",e)},showYearDropdown:!0,showMonthDropdown:!0}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.downloadDump},"click me"))}}]),n}(r.a.Component),C=function(t){m(n,t);var e=D(n);function n(t){var a;return d(this,n),(a=e.call(this,t)).state={items:[[3093,"15.03.2020","14:43:56","tchurovtim@2gmail.com","\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","200"],[2,"15.03.2020","14:43:56","tchurovtim@gmail.com","\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","200"]],donationsPDay:{"15.03.2020":{donations_that_day:2,sum_that_day:400}},filterText:"",startDate:"",endDate:""},S=S.bind(g(a)),a}return p(n,[{key:"componentDidMount",value:function(){var t=this;fetch("/api/getList").then((function(t){return t.json()})).then((function(e){t.setState({isLoaded:!0,items:e.items,donationsPDay:e.donations_per_day,filterText:""})}),(function(e){t.setState({isLoaded:!0,filterText:"",error:e})}))}}]),p(n,[{key:"convertDate",value:function(t){console.log("dateStr",t);var e=t.split(".");return new Date(e[2],e[1]-1,e[0])}},{key:"checkDateFilter",value:function(t,e,n){return console.log("checkDF",this.convertDate(t),e,n),e<this.convertDate(t)&&this.convertDate(t)<n}},{key:"render",value:function(){var t=this,e=this.state.items.filter((function(e){return e[1].includes(t.state.filterText)||e[3].includes(t.state.filterText)||e[4].includes(t.state.filterText)}));return this.state.startDate&&this.state.endDate&&(e=e.filter((function(e){return t.checkDateFilter(e[1],t.state.startDate,t.state.endDate)}))),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,e.map((function(e,n){return r.a.createElement(x,{parentState:t.state,string:e,key:n})})))))}}]),n}(r.a.Component),x=function(t){m(n,t);var e=D(n);function n(){return d(this,n),e.apply(this,arguments)}return p(n,[{key:"displayRow",value:function(t){var e=this;return t.map((function(t){return r.a.createElement("td",{key:e.props.key+t.toString()},t)}))}},{key:"displaySpan",value:function(t){if(t===this.props.parentState.items.find((function(e){return e[1]===t[1]}))){var e=this.props.parentState.donationsPDay[t[1]];return r.a.createElement("td",{rowSpan:e.donations_that_day},e.sum_that_day)}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:this.props.key},this.displayRow(this.props.string),this.displaySpan(this.props.string)))}}]),n}(r.a.Component),T=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.d,null,r.a.createElement(c.b,null,r.a.createElement(c.a,null,"List of donations"),r.a.createElement(c.a,null,"Download a dump")),r.a.createElement(c.c,null,r.a.createElement("section",{className:"donations-list"},r.a.createElement(C,null)),r.a.createElement("aside",{className:"filter"},r.a.createElement(k,null),r.a.createElement(E,null))),r.a.createElement(c.c,null,r.a.createElement(_,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[165,1,2]]]);
//# sourceMappingURL=main.490b4455.chunk.js.map