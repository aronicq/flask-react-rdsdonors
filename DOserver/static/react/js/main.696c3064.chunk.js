(this["webpackJsonpdo-front"]=this["webpackJsonpdo-front"]||[]).push([[0],{171:function(t,e,a){t.exports=a(340)},176:function(t,e,a){},188:function(t,e){},288:function(t,e,a){},340:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),o=a(20),i=a.n(o),l=(a(176),a(48)),c=a(36),s=a(27),u=a(50),d=a(49),h=a(58),m=a(59),f=a.n(m),D=(a(177),a(168)),p=a(37);a(286),a(287),a(288);var y=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(l.a)(this,a),t=e.call(this),Object(h.a)(Object(s.a)(t),"handleChange",(function(e,a){"fromDate"===e&&(t.setState({fromDate:a}),v("fromDate",a)),"toDate"===e&&(t.setState({toDate:a}),v("toDate",a))})),v=v.bind(Object(s.a)(t)),t.state={fromDate:null,toDate:null},t}return Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,"Filter by date",r.a.createElement("br",null),"From:",r.a.createElement(D.DateRangePicker,{startDate:this.state.fromDate,startDateId:"your_unique_start_date_id",endDate:this.state.toDate,endDateId:"your_unique_end_date_id",onDatesChange:function(e){var a=e.fromDate,n=e.toDate;return t.setState(a,n)},focusedInput:this.state.focusedInput,onFocusChange:function(e){return t.setState({focusedInput:e})}}),r.a.createElement(f.a,{className:"dateFilter",dateFormat:"dd.MM.yyyy",selected:this.state.fromDate,onChange:function(e){return t.handleChange("fromDate",e)},showYearDropdown:!0,showMonthDropdown:!0}),r.a.createElement("br",null),"To:",r.a.createElement(f.a,{className:"dateFilter",dateFormat:"dd.MM.yyyy",selected:this.state.toDate,onChange:function(e){return t.handleChange("toDate",e)},showYearDropdown:!0,showMonthDropdown:!0}))}}]),a}(r.a.Component);function v(t,e){"filterText"===t&&this.setState({filterText:e}),"fromDate"===t&&this.setState({fromDate:e}),"toDate"===t&&this.setState({toDate:e})}var b=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={filterText:""},n}return Object(c.a)(a,[{key:"handleChange",value:function(t){this.setState({filterText:t.target.value}),v("filterText",t.target.value)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,"Filter by contents of email and city:",r.a.createElement("input",{type:"text",value:this.state.filterText,onChange:function(e){return t.handleChange(e)}}))}}]),a}(r.a.Component),g=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r)),Object(h.a)(Object(s.a)(t),"downloadDump",(function(){setTimeout((function(){var e=t.state.fromDate,a=t.state.toDate,n={file:"/download?from="+("0"+e.getDate()).slice(-2)+("0"+(e.getMonth()+1)).slice(-2)+e.getFullYear()+"&to="+("0"+a.getDate()).slice(-2)+("0"+(a.getMonth()+1)).slice(-2)+a.getFullYear()};window.open(n.file)}),100)})),Object(h.a)(Object(s.a)(t),"state",{fromDate:new Date,toDate:new Date}),Object(h.a)(Object(s.a)(t),"handleChange",(function(e,a){"fromDate"===e&&t.setState({fromDate:a}),"toDate"===e&&t.setState({toDate:a})})),t}return Object(c.a)(a,[{key:"render",value:function(){var t=this;return r.a.createElement("div",null,"Get archive entries by date",r.a.createElement("br",null),"From:",r.a.createElement(f.a,{dateFormat:"dd/MM/yyyy",selected:this.state.fromDate,onChange:function(e){return t.handleChange("fromDate",e)},showYearDropdown:!0,showMonthDropdown:!0}),r.a.createElement("br",null),"To:",r.a.createElement(f.a,{dateFormat:"dd/MM/yyyy",selected:this.state.toDate,onChange:function(e){return t.handleChange("toDate",e)},showYearDropdown:!0,showMonthDropdown:!0}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.downloadDump},"click me"))}}]),a}(r.a.Component),E=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(l.a)(this,a),(n=e.call(this,t)).state={items:[[3093,"15.03.2020","14:43:56","tchurovtim@2gmail.com","\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","200"],[2,"15.03.2020","14:43:56","tchurovtim@gmail.com","\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433","200"]],donationsPDay:{"15.03.2020":{donations_that_day:2,sum_that_day:400}},filterText:"",fromDate:"",toDate:""},v=v.bind(Object(s.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=this;fetch("/api/getList").then((function(t){return t.json()})).then((function(e){t.setState({isLoaded:!0,items:e.items,donationsPDay:e.donations_per_day,filterText:""})}),(function(e){t.setState({isLoaded:!0,filterText:"",error:e})}))}}]),Object(c.a)(a,[{key:"convertDate",value:function(t){console.log("dateStr",t);var e=t.split(".");return new Date(e[2],e[1]-1,e[0])}},{key:"checkDateFilter",value:function(t,e,a){return console.log("checkDF",this.convertDate(t),e,a),e<this.convertDate(t)&&this.convertDate(t)<a}},{key:"render",value:function(){var t=this,e=this.state.items.filter((function(e){return e[1].includes(t.state.filterText)||e[3].includes(t.state.filterText)||e[4].includes(t.state.filterText)}));return console.log("checking",e[0][1],this.state.fromDate,this.state.toDate),this.state.fromDate&&this.state.toDate&&(e=e.filter((function(e){return t.checkDateFilter(e[1],t.state.fromDate,t.state.toDate)}))),r.a.createElement("div",null,r.a.createElement("table",null,r.a.createElement("tbody",null,e.map((function(e,a){return r.a.createElement(w,{parentState:t.state,string:e,key:a})})))))}}]),a}(r.a.Component),w=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"displayRow",value:function(t){var e=this;return t.map((function(t){return r.a.createElement("td",{key:e.props.key+t.toString()},t)}))}},{key:"displaySpan",value:function(t){if(t===this.props.parentState.items.find((function(e){return e[1]===t[1]}))){var e=this.props.parentState.donationsPDay[t[1]];return r.a.createElement("td",{rowSpan:e.donations_that_day},e.sum_that_day)}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",{key:this.props.key},this.displayRow(this.props.string),this.displaySpan(this.props.string)))}}]),a}(r.a.Component),j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.d,null,r.a.createElement(p.b,null,r.a.createElement(p.a,null,"List of donations"),r.a.createElement(p.a,null,"Download a dump")),r.a.createElement(p.c,null,r.a.createElement("section",{className:"donations-list"},r.a.createElement(E,null)),r.a.createElement("aside",{className:"filter"},r.a.createElement(b,null),r.a.createElement(y,null))),r.a.createElement(p.c,null,r.a.createElement(g,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[171,1,2]]]);
//# sourceMappingURL=main.696c3064.chunk.js.map